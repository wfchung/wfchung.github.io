import{_,o as l,c as d,b as t,l as n,u as v,a as p,C as b,t as a,n as c,e as k,m as f,F as m,p as D,k as y}from"./index.86094c6d.js";import{_ as C}from"./titanic-ringtone.bccfadaf.js";const I={setup(){console.log("Music is playing..")}},M={controls:"",autoplay:""},A=t("source",{src:C,type:"audio/mpeg"},null,-1),w=n(" Your browser does not support the audio element. No sound notification. "),T=[A,w];function S(s,e,g,h,o,i){return l(),d("audio",M,T)}var x=_(I,[["render",S]]);const P={setup(){console.log("in setup")},data(){return{ticketData:null,ticketId:"",alertMode:{beeping:"button-enabled",vibrate:"button-enabled",flashing:"button-enabled"},testingAlert:!1,ticketEffect:"ticket-normal",soundComponent:"none"}},created(){this.fetchData(),this.timer=setInterval(this.fetchData,5e3)},components:{SoundNotification:x},methods:{setAlerting(){this.soundComponent="SoundNotification",this.ticketEffect="ticket-blinking",navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate?(console.log("we can vibrate"),navigator.vibrate([1e3,500,1e3,500,2e3])):console.log("no vibration for you :-(")},stopAlerting(){this.soundComponent="none",this.ticketEffect="ticket-normal",navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate?(console.log("we can vibrate"),navigator.vibrate(0)):console.log("no vibration for you :-(")},async fetchData(){console.log("Fetching data..."),this.ticketData=null;try{const s=v();this.ticketId==""&&(this.ticketId=s.params.ticketId);const e=await p.get(`${b.API_HOST}/api/tickets/${this.ticketId}/online`);e.statusText=="OK"?(this.ticketData=e.data,console.log("queuePos retrieved:"+this.ticketData.queuePos),this.ticketData.queuePos=="0"&&this.setAlerting()):alert(e.statusText)}catch(s){console.error(s)}},reloadPage(){window.location.reload()},toggleAlertMode(s){switch(s){case"beeping":this.alertMode.beeping=="button-enabled"?this.alertMode.beeping="button-disabled":this.alertMode.beeping="button-enabled";break;case"vibrate":this.alertMode.vibrate=="button-enabled"?this.alertMode.vibrate="button-disabled":this.alertMode.vibrate="button-enabled";break;case"flashing":this.alertMode.flashing=="button-enabled"?this.alertMode.flashing="button-disabled":this.alertMode.flashing="button-enabled";break}},testAlert(){console.log("Testing alert..."),this.soundComponent="SoundNotification"}},computed:{feedQRCode(){return`${b.API_HOST}/${this.ticketId}.png`}}},u=s=>(D("data-v-db9db7b8"),s=s(),y(),s),V={key:0},q={key:1},N={class:"container"},B={class:"row ticket-status"},E={class:"col"},O={class:"resourceDisplayId"},$={class:"queuePos"},F=n(" 1st ticket in the queue"),R=u(()=>t("br",null,null,-1)),z=n(" Average waiting time is 20 minutes "),H={class:"col ticket-status"},Q={class:"row"},Y={class:"col"},K={class:"qr-code"},L=["src"],j={class:"ticketDisplayId"},G={class:"ticketId"},J={class:"submitTime"},U={class:"col"},W=n(" Notification Mode: "),X=n(" \xA0\xA0 "),Z=u(()=>t("div",{class:"col"},[n(" Do you want to see Dr. Cathy? She has only one patient in her queue. "),t("u",null,"Yes"),n(" No ")],-1)),tt=u(()=>t("div",{class:"col"}," ==== Advertisement Area === ",-1));function et(s,e,g,h,o,i){return l(),d(m,null,[t("div",{class:c(o.ticketEffect)},[o.ticketData?(l(),d("div",q,[t("div",N,[t("div",B,[t("div",E,[t("div",O,a(o.ticketData.resourceDisplayId),1),t("div",$,a(o.ticketData.queuePos),1),F,R,z]),t("div",H,[t("button",{onClick:e[0]||(e[0]=r=>i.reloadPage())},"Refresh")])]),t("div",Q,[t("div",Y,[t("div",K,[t("img",{src:i.feedQRCode},null,8,L),t("div",j,a(o.ticketData.ticketDisplayId),1),t("div",G,a(o.ticketData.ticketId),1),t("div",J,a(o.ticketData.submitTime),1)])]),t("div",U,[W,t("button",{class:c(o.alertMode.beeping),onClick:e[1]||(e[1]=r=>i.toggleAlertMode("beeping"))},"Beeping",2),t("button",{class:c(o.alertMode.vibrate),onClick:e[2]||(e[2]=r=>i.toggleAlertMode("vibrate"))},"Vibrate",2),t("button",{class:c(o.alertMode.flashing),onClick:e[3]||(e[3]=r=>i.toggleAlertMode("flashing"))},"Flashing",2),X,t("button",{onClick:e[4]||(e[4]=r=>i.testAlert(o.testingAlert))},"Test")]),Z,tt])])])):(l(),d("div",V,"Loading..."))],2),(l(),k(f(o.soundComponent)))],64)}var it=_(P,[["render",et],["__scopeId","data-v-db9db7b8"]]);export{it as default};
